--- origsrc/libquicktime-1.0.3/configure.ac	2008-05-17 07:20:44.000000000 -0500
+++ src/libquicktime-1.0.3/configure.ac	2008-07-16 18:07:39.828125000 -0500
@@ -41,9 +41,10 @@
 
 LQT_CODEC_API_VERSION="9"
 
-if test "x$have_gpl" = "xtrue"; then
-  LQT_CODEC_API_VERSION="($LQT_CODEC_API_VERSION|0x10000)"
-fi
+dnl Conflicting definitions between config.h and lqt_version.h
+dnl if test "x$have_gpl" = "xtrue"; then
+dnl   LQT_CODEC_API_VERSION="($LQT_CODEC_API_VERSION|0x10000)"
+dnl fi
 
 AH_TEMPLATE([LQT_CODEC_API_VERSION],
             [Libquicktime codec API version])
@@ -345,6 +346,8 @@
 
 AC_SUBST(GL_LIBS)
 
+PKG_PROG_PKG_CONFIG
+
 dnl
 dnl Check for Alsa
 dnl
--- origsrc/libquicktime-1.0.3/m4/avcodec.m4	2008-05-15 15:43:05.000000000 -0500
+++ src/libquicktime-1.0.3/m4/avcodec.m4	2008-07-16 18:07:39.875000000 -0500
@@ -82,7 +82,7 @@
 
 if test "x$avcodec_prefix" != x; then
 AVCODEC_CFLAGS="-I$avcodec_prefix/include"
-AVCODEC_LIBS="-L$avcodec_prefix/lib -lavcodec"
+AVCODEC_LIBS="-L$avcodec_prefix/lib -lavcodec -lavutil"
 ACL_CHECK_AVCODEC([$1])
   if test "x$avcodec_ok" = "xtrue"; then
     avcodec_done="true"
--- origsrc/libquicktime-1.0.3/m4/codeset.m4	1969-12-31 18:00:00.000000000 -0600
+++ src/libquicktime-1.0.3/m4/codeset.m4	2008-07-16 18:09:51.468750000 -0500
@@ -0,0 +1,23 @@
+# codeset.m4 serial AM1 (gettext-0.10.40)
+dnl Copyright (C) 2000-2002 Free Software Foundation, Inc.
+dnl This file is free software, distributed under the terms of the GNU
+dnl General Public License.  As a special exception to the GNU General
+dnl Public License, this file may be distributed as part of a program
+dnl that contains a configuration script generated by Autoconf, under
+dnl the same distribution terms as the rest of that program.
+
+dnl From Bruno Haible.
+
+AC_DEFUN([AM_LANGINFO_CODESET],
+[
+  AC_CACHE_CHECK([for nl_langinfo and CODESET], am_cv_langinfo_codeset,
+    [AC_TRY_LINK([#include <langinfo.h>],
+      [char* cs = nl_langinfo(CODESET);],
+      am_cv_langinfo_codeset=yes,
+      am_cv_langinfo_codeset=no)
+    ])
+  if test $am_cv_langinfo_codeset = yes; then
+    AC_DEFINE(HAVE_LANGINFO_CODESET, 1,
+      [Define if you have <langinfo.h> and nl_langinfo(CODESET).])
+  fi
+])
--- origsrc/libquicktime-1.0.3/m4/glibc21.m4	1969-12-31 18:00:00.000000000 -0600
+++ src/libquicktime-1.0.3/m4/glibc21.m4	2008-07-16 18:09:52.437500000 -0500
@@ -0,0 +1,32 @@
+# glibc21.m4 serial 2 (fileutils-4.1.3, gettext-0.10.40)
+dnl Copyright (C) 2000-2002 Free Software Foundation, Inc.
+dnl This file is free software, distributed under the terms of the GNU
+dnl General Public License.  As a special exception to the GNU General
+dnl Public License, this file may be distributed as part of a program
+dnl that contains a configuration script generated by Autoconf, under
+dnl the same distribution terms as the rest of that program.
+
+# Test for the GNU C Library, version 2.1 or newer.
+# From Bruno Haible.
+
+AC_DEFUN([jm_GLIBC21],
+  [
+    AC_CACHE_CHECK(whether we are using the GNU C Library 2.1 or newer,
+      ac_cv_gnu_library_2_1,
+      [AC_EGREP_CPP([Lucky GNU user],
+	[
+#include <features.h>
+#ifdef __GNU_LIBRARY__
+ #if (__GLIBC__ == 2 && __GLIBC_MINOR__ >= 1) || (__GLIBC__ > 2)
+  Lucky GNU user
+ #endif
+#endif
+	],
+	ac_cv_gnu_library_2_1=yes,
+	ac_cv_gnu_library_2_1=no)
+      ]
+    )
+    AC_SUBST(GLIBC21)
+    GLIBC21="$ac_cv_gnu_library_2_1"
+  ]
+)
--- origsrc/libquicktime-1.0.3/m4/intdiv0.m4	1969-12-31 18:00:00.000000000 -0600
+++ src/libquicktime-1.0.3/m4/intdiv0.m4	2008-07-16 18:09:53.390625000 -0500
@@ -0,0 +1,72 @@
+# intdiv0.m4 serial 1 (gettext-0.11.3)
+dnl Copyright (C) 2002 Free Software Foundation, Inc.
+dnl This file is free software, distributed under the terms of the GNU
+dnl General Public License.  As a special exception to the GNU General
+dnl Public License, this file may be distributed as part of a program
+dnl that contains a configuration script generated by Autoconf, under
+dnl the same distribution terms as the rest of that program.
+
+dnl From Bruno Haible.
+
+AC_DEFUN([gt_INTDIV0],
+[
+  AC_REQUIRE([AC_PROG_CC])dnl
+  AC_REQUIRE([AC_CANONICAL_HOST])dnl
+
+  AC_CACHE_CHECK([whether integer division by zero raises SIGFPE],
+    gt_cv_int_divbyzero_sigfpe,
+    [
+      AC_TRY_RUN([
+#include <stdlib.h>
+#include <signal.h>
+
+static void
+#ifdef __cplusplus
+sigfpe_handler (int sig)
+#else
+sigfpe_handler (sig) int sig;
+#endif
+{
+  /* Exit with code 0 if SIGFPE, with code 1 if any other signal.  */
+  exit (sig != SIGFPE);
+}
+
+int x = 1;
+int y = 0;
+int z;
+int nan;
+
+int main ()
+{
+  signal (SIGFPE, sigfpe_handler);
+/* IRIX and AIX (when "xlc -qcheck" is used) yield signal SIGTRAP.  */
+#if (defined (__sgi) || defined (_AIX)) && defined (SIGTRAP)
+  signal (SIGTRAP, sigfpe_handler);
+#endif
+/* Linux/SPARC yields signal SIGILL.  */
+#if defined (__sparc__) && defined (__linux__)
+  signal (SIGILL, sigfpe_handler);
+#endif
+
+  z = x / y;
+  nan = y / y;
+  exit (1);
+}
+], gt_cv_int_divbyzero_sigfpe=yes, gt_cv_int_divbyzero_sigfpe=no,
+        [
+          # Guess based on the CPU.
+          case "$host_cpu" in
+            alpha* | i[34567]86 | m68k | s390*)
+              gt_cv_int_divbyzero_sigfpe="guessing yes";;
+            *)
+              gt_cv_int_divbyzero_sigfpe="guessing no";;
+          esac
+        ])
+    ])
+  case "$gt_cv_int_divbyzero_sigfpe" in
+    *yes) value=1;;
+    *) value=0;;
+  esac
+  AC_DEFINE_UNQUOTED(INTDIV0_RAISES_SIGFPE, $value,
+    [Define if integer division by zero raises signal SIGFPE.])
+])
--- origsrc/libquicktime-1.0.3/m4/intmax.m4	1969-12-31 18:00:00.000000000 -0600
+++ src/libquicktime-1.0.3/m4/intmax.m4	2008-07-16 18:09:54.046875000 -0500
@@ -0,0 +1,32 @@
+# intmax.m4 serial 1 (gettext-0.12)
+dnl Copyright (C) 2002-2003 Free Software Foundation, Inc.
+dnl This file is free software, distributed under the terms of the GNU
+dnl General Public License.  As a special exception to the GNU General
+dnl Public License, this file may be distributed as part of a program
+dnl that contains a configuration script generated by Autoconf, under
+dnl the same distribution terms as the rest of that program.
+
+dnl From Bruno Haible.
+dnl Test whether the system has the 'intmax_t' type, but don't attempt to
+dnl find a replacement if it is lacking.
+
+AC_DEFUN([gt_TYPE_INTMAX_T],
+[
+  AC_REQUIRE([jm_AC_HEADER_INTTYPES_H])
+  AC_REQUIRE([jm_AC_HEADER_STDINT_H])
+  AC_CACHE_CHECK(for intmax_t, gt_cv_c_intmax_t,
+    [AC_TRY_COMPILE([
+#include <stddef.h> 
+#include <stdlib.h>
+#if HAVE_STDINT_H_WITH_UINTMAX
+#include <stdint.h>
+#endif
+#if HAVE_INTTYPES_H_WITH_UINTMAX
+#include <inttypes.h>
+#endif
+], [intmax_t x = -1;], gt_cv_c_intmax_t=yes, gt_cv_c_intmax_t=no)])
+  if test $gt_cv_c_intmax_t = yes; then
+    AC_DEFINE(HAVE_INTMAX_T, 1,
+      [Define if you have the 'intmax_t' type in <stdint.h> or <inttypes.h>.])
+  fi
+])
--- origsrc/libquicktime-1.0.3/m4/inttypes-pri.m4	1969-12-31 18:00:00.000000000 -0600
+++ src/libquicktime-1.0.3/m4/inttypes-pri.m4	2008-07-16 18:09:54.734375000 -0500
@@ -0,0 +1,32 @@
+# inttypes-pri.m4 serial 1 (gettext-0.11.4)
+dnl Copyright (C) 1997-2002 Free Software Foundation, Inc.
+dnl This file is free software, distributed under the terms of the GNU
+dnl General Public License.  As a special exception to the GNU General
+dnl Public License, this file may be distributed as part of a program
+dnl that contains a configuration script generated by Autoconf, under
+dnl the same distribution terms as the rest of that program.
+
+dnl From Bruno Haible.
+
+# Define PRI_MACROS_BROKEN if <inttypes.h> exists and defines the PRI*
+# macros to non-string values.  This is the case on AIX 4.3.3.
+
+AC_DEFUN([gt_INTTYPES_PRI],
+[
+  AC_REQUIRE([gt_HEADER_INTTYPES_H])
+  if test $gt_cv_header_inttypes_h = yes; then
+    AC_CACHE_CHECK([whether the inttypes.h PRIxNN macros are broken],
+      gt_cv_inttypes_pri_broken,
+      [
+        AC_TRY_COMPILE([#include <inttypes.h>
+#ifdef PRId32
+char *p = PRId32;
+#endif
+], [], gt_cv_inttypes_pri_broken=no, gt_cv_inttypes_pri_broken=yes)
+      ])
+  fi
+  if test "$gt_cv_inttypes_pri_broken" = yes; then
+    AC_DEFINE_UNQUOTED(PRI_MACROS_BROKEN, 1,
+      [Define if <inttypes.h> exists and defines unusable PRI* macros.])
+  fi
+])
--- origsrc/libquicktime-1.0.3/m4/inttypes.m4	1969-12-31 18:00:00.000000000 -0600
+++ src/libquicktime-1.0.3/m4/inttypes.m4	2008-07-16 18:09:55.406250000 -0500
@@ -0,0 +1,27 @@
+# inttypes.m4 serial 1 (gettext-0.11.4)
+dnl Copyright (C) 1997-2002 Free Software Foundation, Inc.
+dnl This file is free software, distributed under the terms of the GNU
+dnl General Public License.  As a special exception to the GNU General
+dnl Public License, this file may be distributed as part of a program
+dnl that contains a configuration script generated by Autoconf, under
+dnl the same distribution terms as the rest of that program.
+
+dnl From Paul Eggert.
+
+# Define HAVE_INTTYPES_H if <inttypes.h> exists and doesn't clash with
+# <sys/types.h>.
+
+AC_DEFUN([gt_HEADER_INTTYPES_H],
+[
+  AC_CACHE_CHECK([for inttypes.h], gt_cv_header_inttypes_h,
+  [
+    AC_TRY_COMPILE(
+      [#include <sys/types.h>
+#include <inttypes.h>],
+      [], gt_cv_header_inttypes_h=yes, gt_cv_header_inttypes_h=no)
+  ])
+  if test $gt_cv_header_inttypes_h = yes; then
+    AC_DEFINE_UNQUOTED(HAVE_INTTYPES_H, 1,
+      [Define if <inttypes.h> exists and doesn't clash with <sys/types.h>.])
+  fi
+])
--- origsrc/libquicktime-1.0.3/m4/inttypes_h.m4	1969-12-31 18:00:00.000000000 -0600
+++ src/libquicktime-1.0.3/m4/inttypes_h.m4	2008-07-16 18:09:56.046875000 -0500
@@ -0,0 +1,28 @@
+# inttypes_h.m4 serial 5 (gettext-0.12)
+dnl Copyright (C) 1997-2003 Free Software Foundation, Inc.
+dnl This file is free software, distributed under the terms of the GNU
+dnl General Public License.  As a special exception to the GNU General
+dnl Public License, this file may be distributed as part of a program
+dnl that contains a configuration script generated by Autoconf, under
+dnl the same distribution terms as the rest of that program.
+
+dnl From Paul Eggert.
+
+# Define HAVE_INTTYPES_H_WITH_UINTMAX if <inttypes.h> exists,
+# doesn't clash with <sys/types.h>, and declares uintmax_t.
+
+AC_DEFUN([jm_AC_HEADER_INTTYPES_H],
+[
+  AC_CACHE_CHECK([for inttypes.h], jm_ac_cv_header_inttypes_h,
+  [AC_TRY_COMPILE(
+    [#include <sys/types.h>
+#include <inttypes.h>],
+    [uintmax_t i = (uintmax_t) -1;],
+    jm_ac_cv_header_inttypes_h=yes,
+    jm_ac_cv_header_inttypes_h=no)])
+  if test $jm_ac_cv_header_inttypes_h = yes; then
+    AC_DEFINE_UNQUOTED(HAVE_INTTYPES_H_WITH_UINTMAX, 1,
+      [Define if <inttypes.h> exists, doesn't clash with <sys/types.h>,
+       and declares uintmax_t. ])
+  fi
+])
--- origsrc/libquicktime-1.0.3/m4/isc-posix.m4	1969-12-31 18:00:00.000000000 -0600
+++ src/libquicktime-1.0.3/m4/isc-posix.m4	2008-07-16 18:09:56.734375000 -0500
@@ -0,0 +1,26 @@
+# isc-posix.m4 serial 2 (gettext-0.11.2)
+dnl Copyright (C) 1995-2002 Free Software Foundation, Inc.
+dnl This file is free software, distributed under the terms of the GNU
+dnl General Public License.  As a special exception to the GNU General
+dnl Public License, this file may be distributed as part of a program
+dnl that contains a configuration script generated by Autoconf, under
+dnl the same distribution terms as the rest of that program.
+
+# This file is not needed with autoconf-2.53 and newer.  Remove it in 2005.
+
+# This test replaces the one in autoconf.
+# Currently this macro should have the same name as the autoconf macro
+# because gettext's gettext.m4 (distributed in the automake package)
+# still uses it.  Otherwise, the use in gettext.m4 makes autoheader
+# give these diagnostics:
+#   configure.in:556: AC_TRY_COMPILE was called before AC_ISC_POSIX
+#   configure.in:556: AC_TRY_RUN was called before AC_ISC_POSIX
+
+undefine([AC_ISC_POSIX])
+
+AC_DEFUN([AC_ISC_POSIX],
+  [
+    dnl This test replaces the obsolescent AC_ISC_POSIX kludge.
+    AC_CHECK_LIB(cposix, strerror, [LIBS="$LIBS -lcposix"])
+  ]
+)
--- origsrc/libquicktime-1.0.3/m4/lcmessage.m4	1969-12-31 18:00:00.000000000 -0600
+++ src/libquicktime-1.0.3/m4/lcmessage.m4	2008-07-16 18:09:57.437500000 -0500
@@ -0,0 +1,32 @@
+# lcmessage.m4 serial 3 (gettext-0.11.3)
+dnl Copyright (C) 1995-2002 Free Software Foundation, Inc.
+dnl This file is free software, distributed under the terms of the GNU
+dnl General Public License.  As a special exception to the GNU General
+dnl Public License, this file may be distributed as part of a program
+dnl that contains a configuration script generated by Autoconf, under
+dnl the same distribution terms as the rest of that program.
+dnl
+dnl This file can can be used in projects which are not available under
+dnl the GNU General Public License or the GNU Library General Public
+dnl License but which still want to provide support for the GNU gettext
+dnl functionality.
+dnl Please note that the actual code of the GNU gettext library is covered
+dnl by the GNU Library General Public License, and the rest of the GNU
+dnl gettext package package is covered by the GNU General Public License.
+dnl They are *not* in the public domain.
+
+dnl Authors:
+dnl   Ulrich Drepper <drepper@cygnus.com>, 1995.
+
+# Check whether LC_MESSAGES is available in <locale.h>.
+
+AC_DEFUN([AM_LC_MESSAGES],
+[
+  AC_CACHE_CHECK([for LC_MESSAGES], am_cv_val_LC_MESSAGES,
+    [AC_TRY_LINK([#include <locale.h>], [return LC_MESSAGES],
+       am_cv_val_LC_MESSAGES=yes, am_cv_val_LC_MESSAGES=no)])
+  if test $am_cv_val_LC_MESSAGES = yes; then
+    AC_DEFINE(HAVE_LC_MESSAGES, 1,
+      [Define if your <locale.h> file defines LC_MESSAGES.])
+  fi
+])
--- origsrc/libquicktime-1.0.3/m4/longdouble.m4	1969-12-31 18:00:00.000000000 -0600
+++ src/libquicktime-1.0.3/m4/longdouble.m4	2008-07-16 18:09:58.984375000 -0500
@@ -0,0 +1,30 @@
+# longdouble.m4 serial 1 (gettext-0.12)
+dnl Copyright (C) 2002-2003 Free Software Foundation, Inc.
+dnl This file is free software, distributed under the terms of the GNU
+dnl General Public License.  As a special exception to the GNU General
+dnl Public License, this file may be distributed as part of a program
+dnl that contains a configuration script generated by Autoconf, under
+dnl the same distribution terms as the rest of that program.
+
+dnl From Bruno Haible.
+dnl Test whether the compiler supports the 'long double' type.
+dnl Prerequisite: AC_PROG_CC
+
+AC_DEFUN([gt_TYPE_LONGDOUBLE],
+[
+  AC_CACHE_CHECK([for long double], gt_cv_c_long_double,
+    [if test "$GCC" = yes; then
+       gt_cv_c_long_double=yes
+     else
+       AC_TRY_COMPILE([
+         /* The Stardent Vistra knows sizeof(long double), but does not support it.  */
+         long double foo = 0.0;
+         /* On Ultrix 4.3 cc, long double is 4 and double is 8.  */
+         int array [2*(sizeof(long double) >= sizeof(double)) - 1];
+         ], ,
+         gt_cv_c_long_double=yes, gt_cv_c_long_double=no)
+     fi])
+  if test $gt_cv_c_long_double = yes; then
+    AC_DEFINE(HAVE_LONG_DOUBLE, 1, [Define if you have the 'long double' type.])
+  fi
+])
--- origsrc/libquicktime-1.0.3/m4/longlong.m4	1969-12-31 18:00:00.000000000 -0600
+++ src/libquicktime-1.0.3/m4/longlong.m4	2008-07-16 18:09:59.656250000 -0500
@@ -0,0 +1,25 @@
+# longlong.m4 serial 4
+dnl Copyright (C) 1999-2003 Free Software Foundation, Inc.
+dnl This file is free software, distributed under the terms of the GNU
+dnl General Public License.  As a special exception to the GNU General
+dnl Public License, this file may be distributed as part of a program
+dnl that contains a configuration script generated by Autoconf, under
+dnl the same distribution terms as the rest of that program.
+
+dnl From Paul Eggert.
+
+# Define HAVE_LONG_LONG if 'long long' works.
+
+AC_DEFUN([jm_AC_TYPE_LONG_LONG],
+[
+  AC_CACHE_CHECK([for long long], ac_cv_type_long_long,
+  [AC_TRY_LINK([long long ll = 1LL; int i = 63;],
+    [long long llmax = (long long) -1;
+     return ll << i | ll >> i | llmax / ll | llmax % ll;],
+    ac_cv_type_long_long=yes,
+    ac_cv_type_long_long=no)])
+  if test $ac_cv_type_long_long = yes; then
+    AC_DEFINE(HAVE_LONG_LONG, 1,
+      [Define if you have the 'long long' type.])
+  fi
+])
--- origsrc/libquicktime-1.0.3/m4/printf-posix.m4	1969-12-31 18:00:00.000000000 -0600
+++ src/libquicktime-1.0.3/m4/printf-posix.m4	2008-07-16 18:10:00.906250000 -0500
@@ -0,0 +1,46 @@
+# printf-posix.m4 serial 2 (gettext-0.13.1)
+dnl Copyright (C) 2003 Free Software Foundation, Inc.
+dnl This file is free software, distributed under the terms of the GNU
+dnl General Public License.  As a special exception to the GNU General
+dnl Public License, this file may be distributed as part of a program
+dnl that contains a configuration script generated by Autoconf, under
+dnl the same distribution terms as the rest of that program.
+
+dnl From Bruno Haible.
+dnl Test whether the printf() function supports POSIX/XSI format strings with
+dnl positions.
+
+AC_DEFUN([gt_PRINTF_POSIX],
+[
+  AC_REQUIRE([AC_PROG_CC])
+  AC_CACHE_CHECK([whether printf() supports POSIX/XSI format strings],
+    gt_cv_func_printf_posix,
+    [
+      AC_TRY_RUN([
+#include <stdio.h>
+#include <string.h>
+/* The string "%2$d %1$d", with dollar characters protected from the shell's
+   dollar expansion (possibly an autoconf bug).  */
+static char format[] = { '%', '2', '$', 'd', ' ', '%', '1', '$', 'd', '\0' };
+static char buf[100];
+int main ()
+{
+  sprintf (buf, format, 33, 55);
+  return (strcmp (buf, "55 33") != 0);
+}], gt_cv_func_printf_posix=yes, gt_cv_func_printf_posix=no,
+      [
+        AC_EGREP_CPP(notposix, [
+#if defined __NetBSD__ || defined _MSC_VER || defined __MINGW32__ || defined __CYGWIN__
+  notposix
+#endif
+        ], gt_cv_func_printf_posix="guessing no",
+           gt_cv_func_printf_posix="guessing yes")
+      ])
+    ])
+  case $gt_cv_func_printf_posix in
+    *yes)
+      AC_DEFINE(HAVE_POSIX_PRINTF, 1,
+        [Define if your printf() function supports format strings with positions.])
+      ;;
+  esac
+])
--- origsrc/libquicktime-1.0.3/m4/signed.m4	1969-12-31 18:00:00.000000000 -0600
+++ src/libquicktime-1.0.3/m4/signed.m4	2008-07-16 18:10:01.875000000 -0500
@@ -0,0 +1,19 @@
+# signed.m4 serial 1 (gettext-0.10.40)
+dnl Copyright (C) 2001-2002 Free Software Foundation, Inc.
+dnl This file is free software, distributed under the terms of the GNU
+dnl General Public License.  As a special exception to the GNU General
+dnl Public License, this file may be distributed as part of a program
+dnl that contains a configuration script generated by Autoconf, under
+dnl the same distribution terms as the rest of that program.
+
+dnl From Bruno Haible.
+
+AC_DEFUN([bh_C_SIGNED],
+[
+  AC_CACHE_CHECK([for signed], bh_cv_c_signed,
+   [AC_TRY_COMPILE(, [signed char x;], bh_cv_c_signed=yes, bh_cv_c_signed=no)])
+  if test $bh_cv_c_signed = no; then
+    AC_DEFINE(signed, ,
+              [Define to empty if the C compiler doesn't support this keyword.])
+  fi
+])
--- origsrc/libquicktime-1.0.3/m4/size_max.m4	1969-12-31 18:00:00.000000000 -0600
+++ src/libquicktime-1.0.3/m4/size_max.m4	2008-07-16 18:10:02.562500000 -0500
@@ -0,0 +1,61 @@
+# size_max.m4 serial 2
+dnl Copyright (C) 2003 Free Software Foundation, Inc.
+dnl This file is free software, distributed under the terms of the GNU
+dnl General Public License.  As a special exception to the GNU General
+dnl Public License, this file may be distributed as part of a program
+dnl that contains a configuration script generated by Autoconf, under
+dnl the same distribution terms as the rest of that program.
+
+dnl From Bruno Haible.
+
+AC_DEFUN([gl_SIZE_MAX],
+[
+  AC_CHECK_HEADERS(stdint.h)
+  dnl First test whether the system already has SIZE_MAX.
+  AC_MSG_CHECKING([for SIZE_MAX])
+  result=
+  AC_EGREP_CPP([Found it], [
+#include <limits.h>
+#if HAVE_STDINT_H
+#include <stdint.h>
+#endif
+#ifdef SIZE_MAX
+Found it
+#endif
+], result=yes)
+  if test -z "$result"; then
+    dnl Define it ourselves. Here we assume that the type 'size_t' is not wider
+    dnl than the type 'unsigned long'.
+    dnl The _AC_COMPUTE_INT macro works up to LONG_MAX, since it uses 'expr',
+    dnl which is guaranteed to work from LONG_MIN to LONG_MAX.
+    _AC_COMPUTE_INT([~(size_t)0 / 10], res_hi,
+      [#include <stddef.h>], result=?)
+    _AC_COMPUTE_INT([~(size_t)0 % 10], res_lo,
+      [#include <stddef.h>], result=?)
+    _AC_COMPUTE_INT([sizeof (size_t) <= sizeof (unsigned int)], fits_in_uint,
+      [#include <stddef.h>], result=?)
+    if test "$fits_in_uint" = 1; then
+      dnl Even though SIZE_MAX fits in an unsigned int, it must be of type
+      dnl 'unsigned long' if the type 'size_t' is the same as 'unsigned long'.
+      AC_TRY_COMPILE([#include <stddef.h>
+        extern size_t foo;
+        extern unsigned long foo;
+        ], [], fits_in_uint=0)
+    fi
+    if test -z "$result"; then
+      if test "$fits_in_uint" = 1; then
+        result="$res_hi$res_lo"U
+      else
+        result="$res_hi$res_lo"UL
+      fi
+    else
+      dnl Shouldn't happen, but who knows...
+      result='~(size_t)0'
+    fi
+  fi
+  AC_MSG_RESULT([$result])
+  if test "$result" != yes; then
+    AC_DEFINE_UNQUOTED([SIZE_MAX], [$result],
+      [Define as the maximum value of type 'size_t', if the system doesn't define it.])
+  fi
+])
--- origsrc/libquicktime-1.0.3/m4/stdint_h.m4	1969-12-31 18:00:00.000000000 -0600
+++ src/libquicktime-1.0.3/m4/stdint_h.m4	2008-07-16 18:10:03.218750000 -0500
@@ -0,0 +1,28 @@
+# stdint_h.m4 serial 3 (gettext-0.12)
+dnl Copyright (C) 1997-2003 Free Software Foundation, Inc.
+dnl This file is free software, distributed under the terms of the GNU
+dnl General Public License.  As a special exception to the GNU General
+dnl Public License, this file may be distributed as part of a program
+dnl that contains a configuration script generated by Autoconf, under
+dnl the same distribution terms as the rest of that program.
+
+dnl From Paul Eggert.
+
+# Define HAVE_STDINT_H_WITH_UINTMAX if <stdint.h> exists,
+# doesn't clash with <sys/types.h>, and declares uintmax_t.
+
+AC_DEFUN([jm_AC_HEADER_STDINT_H],
+[
+  AC_CACHE_CHECK([for stdint.h], jm_ac_cv_header_stdint_h,
+  [AC_TRY_COMPILE(
+    [#include <sys/types.h>
+#include <stdint.h>],
+    [uintmax_t i = (uintmax_t) -1;],
+    jm_ac_cv_header_stdint_h=yes,
+    jm_ac_cv_header_stdint_h=no)])
+  if test $jm_ac_cv_header_stdint_h = yes; then
+    AC_DEFINE_UNQUOTED(HAVE_STDINT_H_WITH_UINTMAX, 1,
+      [Define if <stdint.h> exists, doesn't clash with <sys/types.h>,
+       and declares uintmax_t. ])
+  fi
+])
--- origsrc/libquicktime-1.0.3/m4/uintmax_t.m4	1969-12-31 18:00:00.000000000 -0600
+++ src/libquicktime-1.0.3/m4/uintmax_t.m4	2008-07-16 18:10:03.843750000 -0500
@@ -0,0 +1,32 @@
+# uintmax_t.m4 serial 7 (gettext-0.12)
+dnl Copyright (C) 1997-2003 Free Software Foundation, Inc.
+dnl This file is free software, distributed under the terms of the GNU
+dnl General Public License.  As a special exception to the GNU General
+dnl Public License, this file may be distributed as part of a program
+dnl that contains a configuration script generated by Autoconf, under
+dnl the same distribution terms as the rest of that program.
+
+dnl From Paul Eggert.
+
+AC_PREREQ(2.13)
+
+# Define uintmax_t to 'unsigned long' or 'unsigned long long'
+# if it is not already defined in <stdint.h> or <inttypes.h>.
+
+AC_DEFUN([jm_AC_TYPE_UINTMAX_T],
+[
+  AC_REQUIRE([jm_AC_HEADER_INTTYPES_H])
+  AC_REQUIRE([jm_AC_HEADER_STDINT_H])
+  if test $jm_ac_cv_header_inttypes_h = no && test $jm_ac_cv_header_stdint_h = no; then
+    AC_REQUIRE([jm_AC_TYPE_UNSIGNED_LONG_LONG])
+    test $ac_cv_type_unsigned_long_long = yes \
+      && ac_type='unsigned long long' \
+      || ac_type='unsigned long'
+    AC_DEFINE_UNQUOTED(uintmax_t, $ac_type,
+      [Define to unsigned long or unsigned long long
+       if <stdint.h> and <inttypes.h> don't define.])
+  else
+    AC_DEFINE(HAVE_UINTMAX_T, 1,
+      [Define if you have the 'uintmax_t' type in <stdint.h> or <inttypes.h>.])
+  fi
+])
--- origsrc/libquicktime-1.0.3/m4/ulonglong.m4	1969-12-31 18:00:00.000000000 -0600
+++ src/libquicktime-1.0.3/m4/ulonglong.m4	2008-07-16 18:10:04.515625000 -0500
@@ -0,0 +1,25 @@
+# ulonglong.m4 serial 3
+dnl Copyright (C) 1999-2003 Free Software Foundation, Inc.
+dnl This file is free software, distributed under the terms of the GNU
+dnl General Public License.  As a special exception to the GNU General
+dnl Public License, this file may be distributed as part of a program
+dnl that contains a configuration script generated by Autoconf, under
+dnl the same distribution terms as the rest of that program.
+
+dnl From Paul Eggert.
+
+# Define HAVE_UNSIGNED_LONG_LONG if 'unsigned long long' works.
+
+AC_DEFUN([jm_AC_TYPE_UNSIGNED_LONG_LONG],
+[
+  AC_CACHE_CHECK([for unsigned long long], ac_cv_type_unsigned_long_long,
+  [AC_TRY_LINK([unsigned long long ull = 1ULL; int i = 63;],
+    [unsigned long long ullmax = (unsigned long long) -1;
+     return ull << i | ull >> i | ullmax / ull | ullmax % ull;],
+    ac_cv_type_unsigned_long_long=yes,
+    ac_cv_type_unsigned_long_long=no)])
+  if test $ac_cv_type_unsigned_long_long = yes; then
+    AC_DEFINE(HAVE_UNSIGNED_LONG_LONG, 1,
+      [Define if you have the 'unsigned long long' type.])
+  fi
+])
--- origsrc/libquicktime-1.0.3/m4/wchar_t.m4	1969-12-31 18:00:00.000000000 -0600
+++ src/libquicktime-1.0.3/m4/wchar_t.m4	2008-07-16 18:10:05.171875000 -0500
@@ -0,0 +1,22 @@
+# wchar_t.m4 serial 1 (gettext-0.12)
+dnl Copyright (C) 2002-2003 Free Software Foundation, Inc.
+dnl This file is free software, distributed under the terms of the GNU
+dnl General Public License.  As a special exception to the GNU General
+dnl Public License, this file may be distributed as part of a program
+dnl that contains a configuration script generated by Autoconf, under
+dnl the same distribution terms as the rest of that program.
+
+dnl From Bruno Haible.
+dnl Test whether <stddef.h> has the 'wchar_t' type.
+dnl Prerequisite: AC_PROG_CC
+
+AC_DEFUN([gt_TYPE_WCHAR_T],
+[
+  AC_CACHE_CHECK([for wchar_t], gt_cv_c_wchar_t,
+    [AC_TRY_COMPILE([#include <stddef.h>
+       wchar_t foo = (wchar_t)'\0';], ,
+       gt_cv_c_wchar_t=yes, gt_cv_c_wchar_t=no)])
+  if test $gt_cv_c_wchar_t = yes; then
+    AC_DEFINE(HAVE_WCHAR_T, 1, [Define if you have the 'wchar_t' type.])
+  fi
+])
--- origsrc/libquicktime-1.0.3/m4/wint_t.m4	1969-12-31 18:00:00.000000000 -0600
+++ src/libquicktime-1.0.3/m4/wint_t.m4	2008-07-16 18:10:05.859375000 -0500
@@ -0,0 +1,22 @@
+# wint_t.m4 serial 1 (gettext-0.12)
+dnl Copyright (C) 2003 Free Software Foundation, Inc.
+dnl This file is free software, distributed under the terms of the GNU
+dnl General Public License.  As a special exception to the GNU General
+dnl Public License, this file may be distributed as part of a program
+dnl that contains a configuration script generated by Autoconf, under
+dnl the same distribution terms as the rest of that program.
+
+dnl From Bruno Haible.
+dnl Test whether <wchar.h> has the 'wint_t' type.
+dnl Prerequisite: AC_PROG_CC
+
+AC_DEFUN([gt_TYPE_WINT_T],
+[
+  AC_CACHE_CHECK([for wint_t], gt_cv_c_wint_t,
+    [AC_TRY_COMPILE([#include <wchar.h>
+       wint_t foo = (wchar_t)'\0';], ,
+       gt_cv_c_wint_t=yes, gt_cv_c_wint_t=no)])
+  if test $gt_cv_c_wint_t = yes; then
+    AC_DEFINE(HAVE_WINT_T, 1, [Define if you have the 'wint_t' type.])
+  fi
+])
--- origsrc/libquicktime-1.0.3/m4/xsize.m4	1969-12-31 18:00:00.000000000 -0600
+++ src/libquicktime-1.0.3/m4/xsize.m4	2008-07-16 18:10:06.546875000 -0500
@@ -0,0 +1,14 @@
+# xsize.m4 serial 2
+dnl Copyright (C) 2003 Free Software Foundation, Inc.
+dnl This file is free software, distributed under the terms of the GNU
+dnl General Public License.  As a special exception to the GNU General
+dnl Public License, this file may be distributed as part of a program
+dnl that contains a configuration script generated by Autoconf, under
+dnl the same distribution terms as the rest of that program.
+
+AC_DEFUN([gl_XSIZE],
+[
+  dnl Prerequisites of lib/xsize.h.
+  AC_REQUIRE([gl_SIZE_MAX])
+  AC_CHECK_HEADERS(stdint.h)
+])
--- origsrc/libquicktime-1.0.3/plugins/audiocodec/Makefile.am	2008-05-17 07:40:16.000000000 -0500
+++ src/libquicktime-1.0.3/plugins/audiocodec/Makefile.am	2008-07-16 18:07:39.890625000 -0500
@@ -9,7 +9,7 @@
 pcm.c \
 lqt_audiocodec.c
 
-lqt_audiocodec_la_LDFLAGS = -avoid-version -module
+lqt_audiocodec_la_LDFLAGS = -avoid-version -module -no-undefined
 lqt_audiocodec_la_LIBADD = @MODULE_LIBADD@
 
 noinst_HEADERS = \
--- origsrc/libquicktime-1.0.3/plugins/dv/Makefile.am	2008-05-17 07:44:17.000000000 -0500
+++ src/libquicktime-1.0.3/plugins/dv/Makefile.am	2008-07-16 18:07:39.921875000 -0500
@@ -4,7 +4,7 @@
 pkglib_LTLIBRARIES = lqt_dv.la
 
 lqt_dv_la_SOURCES = dv.c lqt_dv.c
-lqt_dv_la_LDFLAGS = -avoid-version -module -lm
+lqt_dv_la_LDFLAGS = -avoid-version -module -no-undefined -lm
 
 lqt_dv_la_LIBADD = @MODULE_LIBADD@ @LIBDV_LIBS@
 
--- origsrc/libquicktime-1.0.3/plugins/faac/Makefile.am	2008-05-17 07:43:00.000000000 -0500
+++ src/libquicktime-1.0.3/plugins/faac/Makefile.am	2008-07-16 18:07:39.937500000 -0500
@@ -6,6 +6,6 @@
 pkglib_LTLIBRARIES = lqt_faac.la
 
 lqt_faac_la_SOURCES = faac.c lqt_faac.c
-lqt_faac_la_LDFLAGS = -avoid-version -module
+lqt_faac_la_LDFLAGS = -avoid-version -module -no-undefined
 lqt_faac_la_LIBADD = @FAAC_LIBS@ @MODULE_LIBADD@
 
--- origsrc/libquicktime-1.0.3/plugins/faad2/Makefile.am	2008-05-17 07:44:46.000000000 -0500
+++ src/libquicktime-1.0.3/plugins/faad2/Makefile.am	2008-07-16 18:07:40.000000000 -0500
@@ -4,6 +4,6 @@
 pkglib_LTLIBRARIES = lqt_faad2.la
 
 lqt_faad2_la_SOURCES = faad2.c lqt_faad2.c
-lqt_faad2_la_LDFLAGS = -avoid-version -module
+lqt_faad2_la_LDFLAGS = -avoid-version -module -no-undefined
 lqt_faad2_la_LIBADD = @FAAD2_LIBS@ @MODULE_LIBADD@
 
--- origsrc/libquicktime-1.0.3/plugins/ffmpeg/Makefile.am	2008-05-17 07:45:14.000000000 -0500
+++ src/libquicktime-1.0.3/plugins/ffmpeg/Makefile.am	2008-07-16 18:07:40.031250000 -0500
@@ -14,7 +14,7 @@
 pkglib_LTLIBRARIES = lqt_ffmpeg.la
 
 lqt_ffmpeg_la_SOURCES = lqt_ffmpeg.c audio.c video.c params.c
-lqt_ffmpeg_la_LDFLAGS = -avoid-version -module
+lqt_ffmpeg_la_LDFLAGS = -avoid-version -module -no-undefined
 lqt_ffmpeg_la_LIBADD = @MODULE_LIBADD@ @AVCODEC_LIBS@ $(libswscale_libs)
 
 noinst_HEADERS = ffmpeg.h params.h
--- origsrc/libquicktime-1.0.3/plugins/lame/Makefile.am	2008-05-17 07:43:59.000000000 -0500
+++ src/libquicktime-1.0.3/plugins/lame/Makefile.am	2008-07-16 18:07:40.046875000 -0500
@@ -7,6 +7,6 @@
 
 AM_CFLAGS = @LAME_CFLAGS@ -DLOCALE_DIR=\"$(localedir)\"
 
-lqt_lame_la_LDFLAGS = -avoid-version -module
+lqt_lame_la_LDFLAGS = -avoid-version -module -no-undefined
 lqt_lame_la_LIBADD = @MODULE_LIBADD@ @LAME_LIBS@
 
--- origsrc/libquicktime-1.0.3/plugins/mjpeg/Makefile.am	2008-05-17 07:44:31.000000000 -0500
+++ src/libquicktime-1.0.3/plugins/mjpeg/Makefile.am	2008-07-16 18:07:40.109375000 -0500
@@ -12,6 +12,6 @@
 lqt_mjpeg.c \
 libmjpeg.c
 
-lqt_mjpeg_la_LDFLAGS = -avoid-version -module
+lqt_mjpeg_la_LDFLAGS = -avoid-version -module -no-undefined
 lqt_mjpeg_la_LIBADD = @JPEG_LIBS@ @MODULE_LIBADD@
 
--- origsrc/libquicktime-1.0.3/plugins/png/Makefile.am	2008-05-17 07:44:58.000000000 -0500
+++ src/libquicktime-1.0.3/plugins/png/Makefile.am	2008-07-16 18:07:03.421875000 -0500
@@ -4,6 +4,6 @@
 pkglib_LTLIBRARIES = lqt_png.la
 
 lqt_png_la_SOURCES = qtpng.c lqt_png.c
-lqt_png_la_LDFLAGS = -avoid-version -module
+lqt_png_la_LDFLAGS = -avoid-version -module -no-undefined
 lqt_png_la_LIBADD = @LIBPNG_LIBS@ -lz -lm @MODULE_LIBADD@
 
--- origsrc/libquicktime-1.0.3/plugins/rtjpeg/Makefile.am	2008-05-17 07:42:32.000000000 -0500
+++ src/libquicktime-1.0.3/plugins/rtjpeg/Makefile.am	2008-07-16 18:07:40.125000000 -0500
@@ -4,7 +4,7 @@
 INCLUDES = -I$(top_srcdir)/include -I$(top_builddir)/include
 
 lqt_rtjpeg_la_SOURCES = rtjpeg_codec.c lqt_rtjpeg.c RTjpeg.c
-lqt_rtjpeg_la_LDFLAGS = -avoid-version -module
+lqt_rtjpeg_la_LDFLAGS = -avoid-version -module -no-undefined
 lqt_rtjpeg_la_LIBADD = @MODULE_LIBADD@
 
 noinst_HEADERS = RTjpeg.h rtjpeg_codec.h mmx.h
--- origsrc/libquicktime-1.0.3/plugins/videocodec/Makefile.am	2008-05-17 07:41:31.000000000 -0500
+++ src/libquicktime-1.0.3/plugins/videocodec/Makefile.am	2008-07-16 18:07:40.156250000 -0500
@@ -16,7 +16,7 @@
 videocodec.c \
 lqt_videocodec.c
 
-lqt_videocodec_la_LDFLAGS = -avoid-version -module
+lqt_videocodec_la_LDFLAGS = -avoid-version -module -no-undefined
 lqt_videocodec_la_LIBADD = @MODULE_LIBADD@
 
 
--- origsrc/libquicktime-1.0.3/plugins/vorbis/Makefile.am	2008-05-17 07:45:33.000000000 -0500
+++ src/libquicktime-1.0.3/plugins/vorbis/Makefile.am	2008-07-16 18:07:40.203125000 -0500
@@ -4,8 +4,8 @@
 pkglib_LTLIBRARIES = lqt_vorbis.la
 
 lqt_vorbis_la_SOURCES = vorbis.c lqt_vorbis.c
-lqt_vorbis_la_LDFLAGS = -avoid-version -module
-lqt_vorbis_la_LIBADD = @MODULE_LIBADD@ @VORBISENC_LIBS@ @VORBIS_LIBS@ @VORBISFILE_LIBS@
+lqt_vorbis_la_LDFLAGS = -avoid-version -module -no-undefined
+lqt_vorbis_la_LIBADD = @MODULE_LIBADD@ @VORBISENC_LIBS@ @VORBIS_LIBS@ @VORBISFILE_LIBS@ -logg
 
 noinst_HEADERS = qtvorbis.h
 
--- origsrc/libquicktime-1.0.3/plugins/x264/Makefile.am	2008-05-17 07:43:37.000000000 -0500
+++ src/libquicktime-1.0.3/plugins/x264/Makefile.am	2008-07-16 18:07:40.218750000 -0500
@@ -4,6 +4,6 @@
 pkglib_LTLIBRARIES = lqt_x264.la
 
 lqt_x264_la_SOURCES = x264.c lqt_x264.c
-lqt_x264_la_LDFLAGS = -avoid-version -module
+lqt_x264_la_LDFLAGS = -avoid-version -module -no-undefined
 lqt_x264_la_LIBADD = @X264_LIBS@ @MODULE_LIBADD@
 
--- origsrc/libquicktime-1.0.3/src/Makefile.am	2008-05-17 07:28:18.000000000 -0500
+++ src/libquicktime-1.0.3/src/Makefile.am	2008-07-16 18:06:50.453125000 -0500
@@ -9,7 +9,7 @@
 #
 libquicktime_la_LIBADD = @ICONV_LIBS@ @LTLIBINTL@
 
-libquicktime_la_LDFLAGS = -export-dynamic
+libquicktime_la_LDFLAGS = -export-dynamic -no-undefined
 
 # build only the files, which can be compiled
 
--- origsrc/libquicktime-1.0.3/utils/Makefile.am	2008-05-17 08:05:08.000000000 -0500
+++ src/libquicktime-1.0.3/utils/Makefile.am	2008-07-16 18:07:40.250000000 -0500
@@ -18,8 +18,8 @@
 endif
 noinst_PROGRAMS = test_codec testqt dump_codecs gen_colorspace_tables
 # bin_PROGRAMS = $(xbin) qtinfo qtstreamize qtdechunk qtrechunk qtyuv4toyuv qtdump qtrecover lqt_transcode
-bin_PROGRAMS = $(xbin) qtinfo qtstreamize qtdechunk qtrechunk qtyuv4toyuv qtdump lqt_transcode qt2text
-man1_MANS = $(xman)
+bin_PROGRAMS = qtinfo qtstreamize qtdechunk qtrechunk qtyuv4toyuv qtdump lqt_transcode qt2text
+# man1_MANS = $(xman)
 
 lqt_transcode_SOURCES=lqt_transcode.c
 lqt_transcode_LDADD=@UTIL_LIBADD@ -lm
